{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/ai_health_navigator/new_project/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///home/user/ai_health_navigator/new_project/src/app/history/page.tsx"],"sourcesContent":["\n'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/components/AuthProvider';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { collection, query, where, getDocs, Timestamp, orderBy, doc, deleteDoc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\n\n// Doctor interface (must match what is stored in history)\ninterface Doctor {\n  id: string;\n  name: string;\n  specialty: string;\n  location: string;\n}\n\n// Updated history record interface to include symptoms\ninterface SearchHistoryRecord {\n  id: string;\n  searchTerm: string; // Specialist\n  symptoms?: string; // Original symptoms\n  response: Doctor[]; // The list of doctors from the search\n  createdAt: Timestamp;\n}\n\nexport default function HistoryPage() {\n  const { user, loading: authLoading } = useAuth();\n  const [history, setHistory] = useState<SearchHistoryRecord[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [deletingId, setDeletingId] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchHistory = async () => {\n      if (!user) {\n        setLoading(false);\n        setHistory([]);\n        return;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const historyRef = collection(db, 'history');\n        const q = query(historyRef, where(\"userId\", \"==\", user.uid), orderBy(\"createdAt\", \"desc\"));\n        const querySnapshot = await getDocs(q);\n        \n        const fetchedHistory: SearchHistoryRecord[] = [];\n        querySnapshot.forEach((doc) => {\n          const data = doc.data();\n          fetchedHistory.push({\n            id: doc.id,\n            searchTerm: data.searchTerm,\n            symptoms: data.symptoms,\n            response: data.response || [],\n            createdAt: data.createdAt,\n          });\n        });\n        setHistory(fetchedHistory);\n      } catch (err: any) {\n        console.error(\"Error fetching history: \", err);\n        setError(\"Failed to fetch search history. Please ensure you have created the required Firestore index.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (!authLoading) {\n      fetchHistory();\n    }\n  }, [user, authLoading]);\n\n  const handleDelete = async (id: string) => {\n    setDeletingId(id);\n    setError(null);\n    try {\n      const historyDocRef = doc(db, 'history', id);\n      await deleteDoc(historyDocRef);\n      setHistory(prevHistory => prevHistory.filter(item => item.id !== id));\n    } catch (err) {\n      console.error(\"Error deleting history item: \", err);\n      setError(\"Failed to delete history item. Please try again.\");\n    } finally {\n      setDeletingId(null);\n    }\n  };\n\n  if (authLoading) {\n    return <p className=\"text-center mt-12\">Loading user data...</p>;\n  }\n\n  if (!user) {\n    return (\n        <div className=\"flex flex-col items-center justify-center p-8 text-white\">\n             <p className=\"text-center text-red-500\">Please log in to view your search history.</p>\n        </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full max-w-4xl mx-auto\">\n      <h1 className=\"text-3xl font-bold mb-6 text-center text-blue-400\">Search History</h1>\n\n      {loading ? (\n        <p className=\"text-center mt-12\">Loading your search history...</p>\n      ) : error ? (\n          <p className=\"text-center text-red-500 mt-12\">{error}</p>\n      ): history.length === 0 ? (\n        <p className=\"text-center text-gray-400 mt-12\">You have no search history yet.</p>\n      ) : (\n        <div className=\"space-y-6\">\n          {history.map(item => (\n            <Card key={item.id} className=\"bg-gray-800 border-gray-700 overflow-hidden\">\n              <CardHeader className=\"p-4 bg-gray-750 border-b border-gray-600\">\n                  <div className=\"flex justify-between items-start\">\n                      <div className=\"flex-grow\">\n                        {item.symptoms ? (\n                            <div>\n                                <h2 className=\"text-lg font-semibold text-gray-300\">Your Symptoms:</h2>\n                                <p className=\"text-xl font-bold text-white mb-2\">\"{item.symptoms}\"</p>\n                                <h3 className=\"text-md font-semibold text-gray-400\">Recommended Specialist: <span className=\"font-bold text-blue-300\">{item.searchTerm}</span></h3>\n                            </div>\n                        ) : (\n                            <h2 className=\"text-xl font-bold text-white\">Specialist Searched: \"{item.searchTerm}\"</h2>\n                        )}\n                      </div>\n                      <div className='text-right flex-shrink-0 ml-4'>\n                        <p className='text-sm text-gray-400 mb-2'>{new Date(item.createdAt.seconds * 1000).toLocaleString()}</p>\n                        <Button \n                            variant=\"destructive\" \n                            size=\"sm\" \n                            onClick={() => handleDelete(item.id)}\n                            disabled={deletingId === item.id}\n                        >\n                            {deletingId === item.id ? 'Deleting...' : 'Delete'}\n                        </Button>\n                      </div>\n                  </div>\n              </CardHeader>\n              <CardContent className=\"p-4\">\n                {item.response && item.response.length > 0 ? (\n                    <div>\n                        <h3 className=\"text-lg font-semibold text-blue-300 mb-3\">Doctors Found:</h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            {item.response.map(doctor => (\n                                <div key={doctor.id} className=\"bg-gray-900 p-3 rounded-lg border border-gray-700\">\n                                    <p className=\"font-bold text-white\">{doctor.name}</p>\n                                    <p className=\"text-sm text-gray-300\">{doctor.specialty}</p>\n                                    <p className=\"text-xs text-gray-400 mt-1\">{doctor.location}</p>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                ) : (\n                    <p className=\"text-gray-400\">No doctors were found for this search.</p>\n                )}\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}