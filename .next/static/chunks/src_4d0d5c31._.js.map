{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/ai_health_navigator/new_project/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACZ,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAClB,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACjB,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACvB,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAClB,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACnB,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAClB,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS","debugId":null}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///home/user/ai_health_navigator/new_project/src/app/doctors/search/page.tsx"],"sourcesContent":["\n'use client';\n\nimport { useSearchParams } from 'next/navigation';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { useEffect, useState, useCallback } from 'react';\nimport { collection, query, where, getDocs, doc, writeBatch, Timestamp, getDoc, addDoc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\nimport { useAuth } from '@/components/AuthProvider';\n\ninterface Doctor {\n  id: string;\n  name: string;\n  specialty: string;\n  location: string;\n  availability: string;\n  slots?: { time: string; booked: boolean }[];\n}\n\ninterface Appointment {\n  userId: string;\n  doctorId: string;\n  doctorName: string;\n  specialty: string;\n  appointmentTime: string;\n  createdAt: Timestamp;\n}\n\nexport default function DoctorSearchPage() {\n  const searchParams = useSearchParams();\n  const specialist = searchParams.get('specialist');\n  const symptoms = searchParams.get('symptoms'); // Retrieve symptoms\n  const { user, loading: authLoading } = useAuth();\n\n  const [doctors, setDoctors] = useState<Doctor[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [bookingState, setBookingState] = useState<{ doctorId: string | null; slot: string | null; loading: boolean; error: string | null }>({\n    doctorId: null,\n    slot: null,\n    loading: false,\n    error: null,\n  });\n\n  const fetchDoctors = useCallback(async () => {\n    if (!specialist) {\n      setLoading(false);\n      return;\n    }\n    \n    if (authLoading) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const doctorsRef = collection(db, 'doctors');\n      const q = query(doctorsRef, where(\"specialty\", \"==\", specialist));\n      const querySnapshot = await getDocs(q);\n      \n      const fetchedDoctors: Doctor[] = [];\n      const historyResponse: Omit<Doctor, 'slots'>[] = [];\n\n      querySnapshot.forEach((doc) => {\n        const data = doc.data();\n        const dummySlots = [\n          { time: \"09:00 AM\", booked: Math.random() > 0.5 },\n          { time: \"10:00 AM\", booked: Math.random() > 0.5 },\n          { time: \"11:00 AM\", booked: Math.random() > 0.5 },\n          { time: \"02:00 PM\", booked: false },\n        ];\n        fetchedDoctors.push({ id: doc.id, ...data, slots: dummySlots } as Doctor);\n        historyResponse.push({\n            id: doc.id,\n            name: data.name,\n            specialty: data.specialty,\n            location: data.location,\n            availability: data.availability,\n        });\n      });\n      \n      setDoctors(fetchedDoctors);\n\n      if (user) {\n        const historyRef = collection(db, 'history');\n        await addDoc(historyRef, {\n          userId: user.uid,\n          searchTerm: specialist, // This remains the specialist\n          symptoms: symptoms, // Add the original symptoms\n          response: historyResponse,\n          createdAt: new Date(),\n        });\n      }\n\n    } catch (err) {\n      console.error(\"Error fetching doctors: \", err);\n      if ((err as any).code === 'failed-precondition' || (err as any).message.includes('firestore')) {\n        setError(\"Could not connect to the doctor database. Please ensure it is set up correctly.\");\n      } else if ((err as any).code === 'permission-denied') {\n        setError(\"You do not have permission to view this data. Please log in.\");\n      } else {\n        setError(\"Failed to fetch doctors. Please try again later.\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [specialist, symptoms, user, authLoading]);\n\n  useEffect(() => {\n    if (!authLoading) {\n      fetchDoctors();\n    }\n  }, [fetchDoctors, authLoading]);\n\n  const handleBookAppointment = async (doctorId: string, slotTime: string) => {\n    // Booking logic remains here\n  };\n\n  if (authLoading) {\n    return <p className=\"text-center py-10\">Authenticating...</p>;\n  }\n\n  return (\n    <div className=\"w-full max-w-4xl mx-auto\">\n      <h1 className=\"text-3xl font-bold mb-2 text-center text-blue-400\">Find a Doctor</h1>\n      <p className=\"text-center text-lg text-gray-300 mb-6\">\n        Showing results for: <span className=\"font-semibold\">{specialist || 'N/A'}</span>\n      </p>\n\n      <div className=\"bg-yellow-900 border-l-4 border-yellow-500 text-yellow-100 p-4 mb-6 rounded-md\" role=\"alert\">\n        <p className=\"font-bold\">Developer Note</p>\n        <p>Due to the billing issue, we cannot add Google Maps and Gemini in this.</p>\n      </div>\n\n      {loading && <p className=\"text-center py-10\">Finding doctors...</p>}\n      \n      {error && <p className=\"text-center text-red-500 py-10\">{error}</p>}\n\n      {!loading && !error && doctors.length > 0 && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {doctors.map(doctor => (\n            <Card key={doctor.id} className=\"bg-gray-800 border-gray-700 flex flex-col\">\n              <CardHeader>\n                <CardTitle className=\"text-xl text-white\">{doctor.name}</CardTitle>\n                <p className=\"text-sm text-blue-300 pt-1\">{doctor.specialty}</p>\n              </CardHeader>\n              <CardContent className=\"space-y-4 flex-grow flex flex-col justify-between\">\n                <div>\n                  <p className=\"text-gray-400\"><strong>Location:</strong> {doctor.location}</p>\n                  <p className=\"text-gray-400 mt-2\"><strong>Available Slots:</strong></p>\n                  <div className=\"grid grid-cols-2 gap-2 mt-2\">\n                      {doctor.slots?.map(slot => (\n                          <Button \n                              key={slot.time}\n                              variant=\"outline\"\n                              disabled={slot.booked || (bookingState.loading && bookingState.doctorId === doctor.id && bookingState.slot === slot.time)}\n                              onClick={() => handleBookAppointment(doctor.id, slot.time)}\n                              className={`\n                                  ${slot.booked ? \"bg-red-900 text-gray-500 cursor-not-allowed\" : \"bg-blue-600 hover:bg-blue-700\"}\n                                  ${bookingState.doctorId === doctor.id && bookingState.slot === slot.time ? \"bg-yellow-500\" : \"\"}\n                              `}\n                          >\n                              {bookingState.loading && bookingState.doctorId === doctor.id && bookingState.slot === slot.time ? \"Booking...\" : slot.time}\n                          </Button>\n                      ))}\n                  </div>\n                </div>\n                {bookingState.error && bookingState.doctorId === doctor.id && (\n                    <p className=\"text-red-400 text-sm mt-2 text-center\">{bookingState.error}</p>\n                )}\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      {!loading && !error && doctors.length === 0 && (\n        <div className=\"text-center py-10\">\n          <p className=\"text-lg text-gray-400\">No doctors found for this specialty at the moment.</p>\n          <p className=\"text-sm text-gray-500 mt-2\">Please check your spelling or try another specialty.</p>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}